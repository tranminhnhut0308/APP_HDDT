<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"
                          x:Class="MyLoginApp.Pages.BanVangPage"
                          BackgroundColor="White"
             Title="BÃ¡n VÃ ng">
    <Shell.TitleView>
        <Grid ColumnDefinitions="*,Auto" Padding="10,0">
            <Label Text="BÃ¡n VÃ ng"
                   FontSize="22"
                   FontAttributes="Bold"
                   TextColor="White"
                   VerticalOptions="Center"/>
            <Button
                Grid.Column="1"
                Text="ðŸ”„"
                FontSize="22"
                BackgroundColor="Transparent"
                Clicked="OnResetClicked"
                WidthRequest="60"
                HeightRequest="60"
                HorizontalOptions="End"
                VerticalOptions="Center"/>
        </Grid>
    </Shell.TitleView>
    <ContentPage.Resources>
        <ResourceDictionary>
            <Style x:Key="NutChuan" TargetType="Button">
                <Setter Property="FontSize" Value="13" />
                <Setter Property="HeightRequest" Value="45" />
                <Setter Property="WidthRequest" Value="240" />
                <Setter Property="CornerRadius" Value="25" />
                <Setter Property="Padding" Value="10,5" />
                <Setter Property="HorizontalOptions" Value="Center" />
            </Style>
        </ResourceDictionary>
    </ContentPage.Resources>


    <ScrollView>
        <VerticalStackLayout Padding="20" Spacing="15">

            <Border BackgroundColor="Black"
                    Stroke="#9370DB"
                    StrokeThickness="3"
                    Padding="25,15"
                    Margin="0,0,0,20">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="20" />
                </Border.StrokeShape>
                <Grid ColumnDefinitions="*,Auto" VerticalOptions="Center">
                    <Label Text="ðŸ’° BÃ¡n VÃ ng"
                           FontSize="35"
                           FontAttributes="Bold"
                           TextColor="#FFD700"
                           VerticalOptions="Center"
                           HorizontalOptions="Center"/>
                </Grid>
            </Border>

            <Grid ColumnSpacing="15" Margin="0,0,0,10">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="*" />
                </Grid.ColumnDefinitions>
                <!-- Cá»™t 1: NÃºt + chÃº thÃ­ch -->
                <VerticalStackLayout Grid.Column="0" HorizontalOptions="Center">
                    <Button x:Name="btnChonKhachHang"
                            Text="ðŸ‘¤"
                            FontSize="32"
                            FontAttributes="Bold"
                            BackgroundColor="#FF8C00"
                            TextColor="White"
                            HeightRequest="80"
                            WidthRequest="120"
                            CornerRadius="16"
                            Clicked="OnChonKhachHangClicked"
                            Padding="0"
                            HorizontalOptions="Center"
                            VerticalOptions="Center"/>
                    <Label Text="Chá»n khÃ¡ch hÃ ng"
                           FontSize="14"
                           TextColor="#444"
                           HorizontalOptions="Center"
                           Margin="0,6,0,0"/>
                </VerticalStackLayout>
                <!-- Cá»™t 2: NÃºt + chÃº thÃ­ch -->
                <VerticalStackLayout Grid.Column="1" HorizontalOptions="Center">
                    <Button x:Name="btnQuetVang"
                            Text="ðŸ“·"
                            FontSize="38"
                            FontAttributes="Bold"
                            BackgroundColor="#4682B4"
                            TextColor="White"
                            HeightRequest="80"
                            WidthRequest="120"
                            CornerRadius="16"
                            Clicked="OnChupVaQuetQRClicked"
                            Padding="0"
                            HorizontalOptions="Center"
                            VerticalOptions="Center"/>
                    <Label Text="QuÃ©t tem vÃ ng"
                           FontSize="14"
                           TextColor="#444"
                           HorizontalOptions="Center"
                           Margin="0,6,0,0"/>
                </VerticalStackLayout>
            </Grid>

            <!-- Bao gá»“m cáº£ nháº­p tÃªn vÃ  quÃ©t CCCD -->
            <Border x:Name="frameCustomerSelectionArea"
                    BackgroundColor="#1E1E1E"
                    Stroke="Black"
                    StrokeThickness="1"
                    Padding="15"
                    IsVisible="False">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="15" />
                </Border.StrokeShape>
                <VerticalStackLayout Spacing="10">
                    <!-- NÃºt QuÃ©t CCCD -->
                    <Button x:Name="btnQuetCCCD"
                            Text="ðŸ“· QuÃ©t CCCD"
                            Clicked="OnQuetCCCDClicked"
                            BackgroundColor="#4682B4"
                            TextColor="White"/>

                    <Label x:Name="lblHoac" Text="Hoáº·c" TextColor="Black" HorizontalOptions="Center" Margin="0,5,0,5"/>

                    <!-- Nháº­p tÃªn khÃ¡ch -->
                    <Border x:Name="frameNhapTenKhach" BackgroundColor="#2C2C2C" Stroke="LightGray" StrokeThickness="1" Padding="10">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="10" />
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <Label Text="ðŸ‘¤ Nháº­p tÃªn khÃ¡ch hÃ ng" TextColor="Black" FontSize="13" FontAttributes="Bold"/>
                            <Entry x:Name="entryTenKhach"
                                   Placeholder="Nháº­p há» tÃªn khÃ¡ch hÃ ng"
                                   TextChanged="OnTenKhachHangChanged"
                                   TextColor="Black"
                                   FontSize="13"
                                   PlaceholderColor="Gray"/>
                            <Label x:Name="lblThongTinKH"
                                   TextColor="Black"
                                   FontSize="13"
                                   IsVisible="False" />
                        </VerticalStackLayout>
                    </Border>

                    <Button x:Name="btnXacNhanKhach"
                            Text="âœ… XÃ¡c nháº­n khÃ¡ch nÃ y"
                            Clicked="OnXacNhanKhachClicked"
                            BackgroundColor="Green"
                            TextColor="Black"
                            IsVisible="False"/>

                    <!-- ThÃªm khÃ¡ch má»›i -->
                    <Border x:Name="frameThemKhach"
                            BackgroundColor="#1E1E1E"
                            Stroke="Black"
                            StrokeThickness="1"
                            Padding="15"
                            IsVisible="False">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15" />
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <Label Text="ðŸ“ž Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i" TextColor="Red" FontSize="13" FontAttributes="Bold"/>
                            <Entry x:Name="entrySoDienThoai"
                                   Placeholder="Nháº­p sá»‘ Ä‘iá»‡n thoáº¡i"
                                   FontSize="13"
                                   TextColor="Black" PlaceholderColor="Gray"/>
                            <Label Text="ðŸ  Äá»‹a chá»‰" TextColor="Red" FontSize="13" FontAttributes="Bold"/>
                            <Entry x:Name="entryDiaChi"
                                   Placeholder="Nháº­p Ä‘á»‹a chá»‰"
                                   FontSize="13"
                                   TextColor="Black" PlaceholderColor="Gray"/>
                            <Label Text="ðŸªª CCCD" TextColor="Red" FontSize="13" FontAttributes="Bold"/>
                            <Entry x:Name="entryCCCD"
                                   Placeholder="Nháº­p sá»‘ CCCD"
                                   FontSize="13"
                                   TextColor="Black" PlaceholderColor="Gray"/>
                            <Button x:Name="btnThemKhachHang"
                                    Text="ThÃªm khÃ¡ch hÃ ng má»›i"
                                    Clicked="OnThemKhachHangClicked"
                                    BackgroundColor="#1E90FF"
                                    TextColor="Black"/>
                        </VerticalStackLayout>
                    </Border>

                    <!-- QuÃ©t CCCD (Di chuyá»ƒn vÃ o trong frameCustomerSelectionArea) -->
                    <Border x:Name="frameQuetCCCD"
                            BackgroundColor="#1E1E1E"
                            Stroke="White"
                            StrokeThickness="1"
                            Padding="15"
                            IsVisible="False">
                        <Border.StrokeShape>
                            <RoundRectangle CornerRadius="15" />
                        </Border.StrokeShape>
                        <VerticalStackLayout>
                            <!-- Loading khi quÃ©t CCCD -->
                            <ActivityIndicator x:Name="loadingQuetCCCD"
                                               IsVisible="False"
                                               IsRunning="False"
                                               Color="#FFD700"
                                               HorizontalOptions="Center"
                                               Margin="0,0,0,5"
                                               HeightRequest="30"
                                               WidthRequest="30" />
                            <Label Text="ðŸªª ThÃ´ng tin CCCD Ä‘Ã£ quÃ©t" TextColor="Black" FontSize="13" FontAttributes="Bold"/>
                            <Label x:Name="lblCCCDInfo"
                                   TextColor="Black"
                                   FontSize="13"
                                   IsVisible="False" />
                            <Button x:Name="btnXacNhanCCCD"
                                    Text="âœ… XÃ¡c nháº­n khÃ¡ch tá»« CCCD"
                                    Clicked="OnXacNhanCCCDClicked"
                                    BackgroundColor="Green"
                                    TextColor="White"
                                    IsVisible="False"/>
                        </VerticalStackLayout>
                    </Border>

                </VerticalStackLayout>
            </Border>

            <Label x:Name="lblKhachHangDaChon"
                   Text=""
                   FontSize="14"
                   TextColor="Black"
                   FontAttributes="Bold"
                   IsVisible="False"
                   HorizontalOptions="Center"/>

            <!-- Loading khi quÃ©t tem vÃ ng -->
            <ActivityIndicator x:Name="loadingQuetVang"
                               IsVisible="False"
                               IsRunning="False"
                               Color="#FFD700"
                               HorizontalOptions="Center"
                               Margin="0,5,0,10"
                               HeightRequest="36"
                               WidthRequest="36" />

            <Label x:Name="lblResult"
                   Text="ðŸ“Œ Káº¿t quáº£: ChÆ°a cÃ³"
                   FontSize="14"
                   TextColor="Black"
                   FontAttributes="Bold"
                   HorizontalOptions="Center"
                   IsVisible="False"/>

            <!-- ThÃ´ng tin vÃ ng -->
            <Border x:Name="frameQRDetails"
        IsVisible="False"
        BackgroundColor="#2C2C2C"
        Stroke="White"
        StrokeThickness="1"
        Padding="10">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="15"/>
                </Border.StrokeShape>
                <Label x:Name="lblQRDetails"
           TextColor="Black"
           FontSize="13"
           FontAttributes="Bold"
           HorizontalTextAlignment="Start" />
            </Border>

            <!-- Nháº­p sá»‘ lÆ°á»£ng + thÃ nh tiá»n -->
            <VerticalStackLayout Spacing="10">


                <Label x:Name="lblTongTien"
                       Text="ðŸ§® ThÃ nh tiá»n: 0Ä‘"
                       FontSize="15"
                       TextColor="Red"
                       HorizontalOptions="Center"
                       IsVisible="False"/>
            </VerticalStackLayout>

            <!-- Danh sÃ¡ch cÃ¡c mÃ£ Ä‘Ã£ quÃ©t -->
            <Border x:Name="frameScannedItems"
                    BackgroundColor="#1E1E1E"
                    Stroke="White"
                    StrokeThickness="1"
                    Padding="10"
                    IsVisible="False">
                <Border.StrokeShape>
                    <RoundRectangle CornerRadius="15"/>
                </Border.StrokeShape>
                <VerticalStackLayout>
                    <Label Text="ðŸ“‹ CÃ¡c mÃ£ Ä‘Ã£ quÃ©t:" 
                           TextColor="White" 
                           FontSize="14" 
                           FontAttributes="Bold"
                           Margin="0,0,0,10"/>
                    <VerticalStackLayout x:Name="stackScannedItems">
                        <!-- Items will be added here programmatically -->
                    </VerticalStackLayout>
                </VerticalStackLayout>
            </Border>

            <!-- NÃºt thanh toÃ¡n -->
            <Button x:Name="btnThanhToan"
                    Text="ðŸ’° Thanh toÃ¡n"
                    Clicked="OnThanhToanClicked"
                    BackgroundColor="#32CD32"
                    TextColor="White"/>

        </VerticalStackLayout>
    </ScrollView>
</ContentPage>
